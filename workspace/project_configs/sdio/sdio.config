
#1: 编译规则
include $(BUILD_DIR)/arch_config/cortex_m3.config
include $(COMMON_CONFIG_DIR)/common_include.mk

#2: 链接
#CLINK_FLAGS += --library_type=microlib
CLINK_FLAGS += -Wl,-T "$(PROJECT_DIR)/$(PROJECT)/$(PROJECT).ld"
CLINK_FLAGS += -Wl,--gc-sections
CLINK_FLAGS += -Wl,--cref
CLINK_FLAGS += -specs=nano.specs
#CLINK_FLAGS += -lc -lm -lnosys
CLINK_FLAGS += -mthumb
CLINK_FLAGS += -mthumb-interwork
CLINK_FLAGS += -fdata-sections -ffunction-sections
CLINK_FLAGS += -Wl,--wrap=atexit
CLINK_FLAGS += -nostartfiles
CLINK_FLAGS += -Wl,--nostdlib
#CLINK_FLAGS += -Wl,--print-gc-sections
#CLINK_FLAGS += -std=c99

#2: c文件编译
#CFLAGS += -DSTM32F10X_HD 
CFLAGS += -DUSE_HAL_DRIVER
CFLAGS += -DSTM32F103xE
CFLAGS += -Wall
CFLAGS += -ggdb
CFLAGS += -fdata-sections -ffunction-sections
CFLAGS += -mthumb
CFLAGS += -mthumb-interwork
CFLAGS += -nostartfiles
CFLAGS += -DSTM32F103xE

#3: 汇编文件
ASMFLAGS += -Wall
ASMFLAGS += -ggdb
ASMFLAGS += -fdata-sections -ffunction-sections
ASMFLAGS += -mthumb
ASMFLAGS += -mthumb-interwork
ASMFLAGS += -nostartfiles

#4: 开发板
	CATOS_BOARD_STM32F103VET6_FIRE				=	y

#4: 指定部分模块的编译与否
#4.1: 内核模块
#CATOS
#bsp
#src
# idle_task
# init
# interrupt
# support


#4.2: 库

#4.2: 应用模块
#user




